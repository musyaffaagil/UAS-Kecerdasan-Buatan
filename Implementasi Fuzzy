
import numpy as np
import skfuzzy as fuzz
from skfuzzy import control as ctrl

pendapatan = ctrl.Antecedent(np.arange(0, 11001, 1), 'pendapatan')
utang = ctrl.Antecedent(np.arange(0, 101, 1), 'utang')
riwayat = ctrl.Antecedent(np.arange(0, 11, 1), 'riwayat')

kelayakan = ctrl.Consequent(np.arange(0, 101, 1), 'kelayakan')

pendapatan['rendah'] = fuzz.trapmf(pendapatan.universe, [0, 0, 2000, 4000])
pendapatan['sedang'] = fuzz.trimf(pendapatan.universe, [3000, 6000, 9000])
pendapatan['tinggi'] = fuzz.trapmf(pendapatan.universe, [8000, 10000, 11000, 11000])

utang['rendah'] = fuzz.trapmf(utang.universe, [0, 0, 20, 40])
utang['sedang'] = fuzz.trimf(utang.universe, [30, 50, 70])
utang['tinggi'] = fuzz.trapmf(utang.universe, [60, 80, 100, 100])

riwayat['buruk'] = fuzz.trapmf(riwayat.universe, [0, 0, 3, 5])
riwayat['sedang'] = fuzz.trimf(riwayat.universe, [4, 5, 7])
riwayat['baik'] = fuzz.trapmf(riwayat.universe, [6, 8, 10, 10])

kelayakan['tidak layak'] = fuzz.trapmf(kelayakan.universe, [0, 0, 25, 50])
kelayakan['layak'] = fuzz.trimf(kelayakan.universe, [40, 60, 80])
kelayakan['sangat layak'] = fuzz.trapmf(kelayakan.universe, [70, 90, 100, 100])

rule1 = ctrl.Rule(pendapatan['rendah'] & utang['tinggi'] & riwayat['buruk'], kelayakan['tidak layak'])
rule2 = ctrl.Rule(pendapatan['tinggi'] & utang['rendah'] & riwayat['baik'], kelayakan['sangat layak'])
rule3 = ctrl.Rule(pendapatan['sedang'] & utang['sedang'] & riwayat['sedang'], kelayakan['layak'])
rule4 = ctrl.Rule(pendapatan['rendah'] | utang['tinggi'], kelayakan['tidak layak'])
rule5 = ctrl.Rule(utang['rendah'] & riwayat['baik'], kelayakan['layak'])

kelayakan_ctrl = ctrl.ControlSystem([rule1, rule2, rule3, rule4, rule5])
kelayakan_simulasi = ctrl.ControlSystemSimulation(kelayakan_ctrl)

kelayakan_simulasi.input['pendapatan'] = 6000
kelayakan_simulasi.input['utang'] = 30
kelayakan_simulasi.input['riwayat'] = 7

kelayakan_simulasi.compute()

print("Hasil Kelayakan Kredit:", kelayakan_simulasi.output['kelayakan'])
